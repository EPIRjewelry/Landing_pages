{%- comment -%}
  Collection Lookbook - collection name shown above each image
{%- endcomment -%}

{% assign enhanced = collection.metafields.custom.collection_enhanced.value %}

{% if enhanced and enhanced.lookbook_images != blank %}
  <section class="collection-lookbook epir-lookbook"
           style="--lookbook-pt: {{ section.settings.padding_top }}px; --lookbook-pb: {{ section.settings.padding_bottom }}px;">
    <div class="page-width">

      {% if section.settings.heading != blank %}
        <header class="lookbook-header">
          <h2 class="lookbook-heading">{{ section.settings.heading }}</h2>
          {% if section.settings.subheading != blank %}
            <p class="lookbook-subheading">{{ section.settings.subheading }}</p>
          {% endif %}
        </header>
      {% endif %}

      <div class="lookbook-grid lookbook-grid--{{ section.settings.columns }}">
{% for image_ref in enhanced.lookbook_images %}
  {% assign image = image_ref %}
  <figure class="lookbook-item">
    {% if section.settings.show_collection_name %}
      <figcaption class="lookbook-caption">{{ collection.title }}</figcaption>
    {% endif %}
    {{ image | image_url: width: 1200 | image_tag: loading: "lazy", alt: collection.title }}
  </figure>
{% endfor %}
      </div>

    </div>
  </section>
{% else %}
  <section class="collection-lookbook-empty epir-lookbook">
    <div class="page-width">
      <p>Brak zdjęć w lookbooku.</p>
    </div>
  </section>
{% endif %}

{% schema %}
{
  "name": "Collection Lookbook",
  "class": "section-collection-lookbook",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "NASZE WSZYSTKIE KOLEKCJE" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Poszukujesz biżuterii w oryginalnej formie? Zapraszamy." },
    { "type": "checkbox", "id": "show_collection_name", "label": "Show collection name above images", "default": true },
    { "type": "range", "id": "columns", "min": 2, "max": 4, "step": 1, "label": "Columns (desktop)", "default": 3 },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding top", "default": 36 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding bottom", "default": 36 }
  ],
  "templates": ["collection"],
  "presets": [{ "name": "Collection Lookbook" }]
}
{% endschema %}

<style>
.epir-lookbook { --epir-green: #2f6b53; --epir-cream: #f6f3ee; }
.section-collection-lookbook .collection-lookbook { padding-top: var(--lookbook-pt); padding-bottom: var(--lookbook-pb); background: var(--epir-cream); }
.lookbook-caption {
  font-family: "Cormorant Garamond", serif;
  text-transform: uppercase;
  font-size: 0.9rem;
  color: var(--epir-green);
  text-align: center;
  margin: 0.6rem 0 0.4rem;
  letter-spacing: 0.06em;
}
.lookbook-item { border-radius: 10px; overflow: hidden; border: 1px solid rgba(47,107,83,0.12); background:#fff; box-shadow:0 10px 24px rgba(0,0,0,0.06); }
.lookbook-item img { width:100%; height:100%; object-fit:cover; transition: transform .4s ease; display:block; }
.lookbook-item:hover img { transform: scale(1.02); }
@media (max-width:749px){ .lookbook-grid{ grid-template-columns: repeat(2,1fr); } .lookbook-caption{ font-size:0.85rem; } }
</style>
